<script>
  import { fly } from 'svelte/transition'

  export let sections
  export let contact
  export let playlists

  let open = false
</script>

<button class:open on:click={() => open = !open}>
  {#if open}
  <svg width="18" height="19" viewBox="0 0 18 19" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line x1="0.542967" y1="18.3179" x2="15.7048" y2="1.02284" />
    <line x1="0.721717" y1="1.51461" x2="16.9852" y2="17.7781" />
  </svg>
  {:else}
  <svg width="23" height="13" viewBox="0 0 23 13" fill="none" xmlns="http://www.w3.org/2000/svg">
    <line y1="0.5" x2="23" y2="0.5" />
    <line y1="6.5" x2="23" y2="6.5" />
    <line y1="12.5" x2="23" y2="12.5" />
  </svg>
  {/if}
</button>

{#if open}
<nav in:fly={{ y: -100 }} out:fly={{ y: -100 }}>
  <div>
    <a href="#manifesto" on:click={() => open = false}><h5>Manifesto</h5></a>
    {#each sections as section}
    <a href="#{section.fields.identifier}" on:click={() => open = false}><h5>{section.fields.title}</h5></a>
    {/each}
    <a href="{playlists}" on:click={() => open = false} target="_blank"><h5>Playlists</h5></a>
  </div>
  
	<div>
	  <a href="{contact}" on:click={() => open = false} target="_blank"><h6>{contact.replace('mailto:', '')}</h6></a>
  </div>
  
	
  <a href="/" class="logo">
    <svg width="257" height="22" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 316.05 33.19"><path d="M26.18,3.84l-4,1.26,1.87,1.25v8.31a7.19,7.19,0,0,0-5.14-2.58c-4.53,0-7.94,3.62-7.94,8.43s3.41,8.43,7.94,8.43a7.16,7.16,0,0,0,5.14-2.59v2.49h4l-1.88-1.95ZM24.05,15.31V25.7a6.65,6.65,0,0,1-5.14,2.8c-2.89,0-5.42-3.74-5.42-8s2.53-8,5.42-8A6.64,6.64,0,0,1,24.05,15.31Z"/><path d="M59.09,17.86a5.41,5.41,0,0,0-5.52-5.78c-2.13,0-3.54.89-5.21,2.45V12.18l-4,1.27,1.87,1.25V26.89L44.6,28.58,43,26.89V16.64a4.27,4.27,0,0,0-4.6-4.53A7,7,0,0,0,32,16.05l-.06.1h1.61a6.72,6.72,0,0,1,4.7,2.11,6.39,6.39,0,0,0-3-.63c-3.49,0-5.92,2.28-5.92,5.55a5.83,5.83,0,0,0,5.92,5.72,5.66,5.66,0,0,0,5.54-3.69v3.63h9.41l-1.88-1.95V15.09c1.14-1.2,2.53-2.41,4.25-2.41,2.73,0,4.36,2.57,4.36,5.05v9.16l-1.88,1.95H61l-1.89-1.95ZM40.8,23.51a4.09,4.09,0,0,1-4.09,4.26,5.42,5.42,0,0,1-5.21-5.35A4.16,4.16,0,0,1,35.78,18C39.24,18,40.8,21.23,40.8,23.51Zm0-2c-.88-2.5-3.49-5.24-6.34-5.66.57-2.08,1.87-3.18,3.74-3.18s2.6,1.19,2.6,3.73Z"/><polygon points="67.12 12.15 63.12 13.41 65 14.67 65 26.89 63.12 28.84 69 28.84 67.12 26.89 67.12 12.15"/><path d="M65.79,10a1.56,1.56,0,1,0-1.55-1.56A1.56,1.56,0,0,0,65.79,10Z"/><path d="M86.43,15.94A8.66,8.66,0,0,0,79,12a8.49,8.49,0,0,0-8.43,8.73c0,5.17,4.55,8.26,9,8.26a6.73,6.73,0,0,0,6.94-6.58c0-3.26-2.49-5.68-6.44-6.37h6.47ZM73.9,15.68a6.3,6.3,0,0,1,5.27-2.9,4.4,4.4,0,0,1,4.39,2.9Zm6,12.15c-3.83,0-7.2-3.82-7.2-8.18a7.26,7.26,0,0,1,.9-3.6h4c4.93,0,8.38,2.58,8.38,6.27C86,25.06,83.89,27.83,79.9,27.83Z"/><polygon points="92.19 3.94 88.19 5.2 90.07 6.45 90.07 26.89 88.19 28.84 94.08 28.84 92.19 26.89 92.19 3.94"/><polygon points="98.84 3.94 94.84 5.2 96.72 6.45 96.72 26.89 94.83 28.84 100.72 28.84 98.84 26.89 98.84 3.94"/><path d="M116.47,26.78a6.77,6.77,0,0,0,1.73-4.36c0-3.26-2.49-5.68-6.44-6.37h6.47l-.08-.11A8.66,8.66,0,0,0,110.73,12a8.49,8.49,0,0,0-8.43,8.73c0,5.17,4.55,8.26,9,8.26A6.78,6.78,0,0,0,116.47,26.78ZM105.32,16.05h4c4.93,0,8.38,2.58,8.38,6.27,0,2.74-2.09,5.51-6.07,5.51s-7.2-3.82-7.2-8.18A7.26,7.26,0,0,1,105.32,16.05Zm.3-.37a6.3,6.3,0,0,1,5.27-2.9,4.4,4.4,0,0,1,4.39,2.9Z"/><polygon points="126.34 28.84 132.23 28.84 130.34 26.89 130.34 3.94 126.34 5.2 128.22 6.45 128.22 26.89 126.34 28.84"/><path d="M149,28.84l-1.89-1.95V16.64a4.26,4.26,0,0,0-4.59-4.53,7,7,0,0,0-6.37,3.94l-.06.1h1.61a6.72,6.72,0,0,1,4.7,2.11,6.42,6.42,0,0,0-2.95-.63c-3.49,0-5.92,2.28-5.92,5.55a5.82,5.82,0,0,0,5.92,5.72A5.67,5.67,0,0,0,145,25.21v3.63Zm-4-5.33a4.1,4.1,0,0,1-4.09,4.26,5.43,5.43,0,0,1-5.22-5.35A4.17,4.17,0,0,1,140,18C143.41,18,145,21.23,145,23.51ZM142.4,12.68c1.77,0,2.6,1.19,2.6,3.73v5.11c-.88-2.5-3.5-5.24-6.35-5.66C139.23,13.78,140.52,12.68,142.4,12.68Z"/><path d="M156.93,28.9c2.13,0,3.62-1,5.19-2.43l1.07,2.37h1.08V12.15l-4,1.26,1.87,1.26V25.89c-1.22,1.25-2.58,2.41-4.25,2.41-2.75,0-4.39-2.59-4.39-5.08V12.15l-4,1.26,1.87,1.26v8.45A5.43,5.43,0,0,0,156.93,28.9Z"/><path d="M171.74,15.72c.86-.82,2.57-1.25,4.71-1.19h.06l.53-2.41h-.1c-3.12.39-5.21,1.16-5.83,3.67V12.15l-4,1.26L169,14.67V26.89l-1.88,1.95H173l-1.88-1.95V17.2A2,2,0,0,1,171.74,15.72Z"/><path d="M193.62,15.94A8.66,8.66,0,0,0,186.2,12a8.49,8.49,0,0,0-8.43,8.73c0,5.17,4.55,8.26,8.95,8.26a6.75,6.75,0,0,0,6.95-6.58c0-3.26-2.49-5.68-6.44-6.37h6.47Zm-2.87-.26h-9.67a6.33,6.33,0,0,1,5.28-2.9A4.4,4.4,0,0,1,190.75,15.68Zm-3.66,12.15c-3.83,0-7.2-3.82-7.2-8.18a7.15,7.15,0,0,1,.9-3.6h4c4.93,0,8.38,2.58,8.38,6.27C193.16,25.06,191.07,27.83,187.09,27.83Z"/><path d="M210.25,17.86a5.41,5.41,0,0,0-5.52-5.78c-2.14,0-3.55.89-5.22,2.45V12.18l-4,1.27,1.88,1.25V26.89l-1.88,1.95h5.88l-1.88-1.95V15.09c1.14-1.2,2.54-2.41,4.26-2.41,2.72,0,4.35,2.57,4.35,5.05v9.16l-1.88,1.95h5.89l-1.88-1.95Z"/><path d="M268.09,18a5.51,5.51,0,0,0-6.2-5.82,3.28,3.28,0,0,0,1.37-2.7,3.71,3.71,0,0,0-3.74-3.68c-1.91,0-4,1.59-4,5.06v5.61a8.23,8.23,0,0,1-1.11,1A8.48,8.48,0,0,0,252.8,19,8.46,8.46,0,0,0,236,20.57a8.1,8.1,0,0,0,.36,2.39c-.66,2.24-3.6,5.37-6.93,5.4h-.05a6.56,6.56,0,0,1-4.53-2.09,10.84,10.84,0,0,1-3.11-7.55c0-3.53,2.08-6.1,4.95-6.1a7.31,7.31,0,0,1,5.56,3.27l0,0h2.91l-.07-.11A8.48,8.48,0,1,0,228,29h.37A9.68,9.68,0,0,0,237,24.42a8.45,8.45,0,0,0,16-4,8.71,8.71,0,0,0,0-.87,7.45,7.45,0,0,1,1.67-1.64,12.29,12.29,0,0,0,1-.87v9.83l-1.89,1.95h5.89l-1.88-1.95V14.76c.22-.2.44-.4.67-.59a9.55,9.55,0,0,1,1.45-1,3.75,3.75,0,0,1,1.74-.42c2.17,0,4.42,1.91,4.42,5.11v9l-1.88,1.95H270l-1.88-1.95Zm-10.41-3.76V10.37c0-2,.78-4,2.51-4a3,3,0,0,1,2.7,3.1,3,3,0,0,1-2.17,2.9,7,7,0,0,0-.91.37l-.31.16a10.56,10.56,0,0,0-1.64,1.17Zm-6.91,8c0,3.62-2.05,6.14-5,6.14a7,7,0,0,1-5.27-2.95,10.69,10.69,0,0,1-2.35-6.56c0-3.61,2.05-6.14,5-6.14a7,7,0,0,1,5.28,3A10.74,10.74,0,0,1,250.77,22.19Z"/><path d="M286.57,15.94A8.66,8.66,0,0,0,279.15,12a8.49,8.49,0,0,0-8.43,8.73c0,5.17,4.55,8.26,8.95,8.26a6.75,6.75,0,0,0,6.95-6.58c0-3.26-2.49-5.68-6.44-6.37h6.47ZM274,15.68a6.33,6.33,0,0,1,5.28-2.9,4.4,4.4,0,0,1,4.39,2.9Zm6,12.15c-3.83,0-7.2-3.82-7.2-8.18a7.15,7.15,0,0,1,.9-3.6h4c4.93,0,8.38,2.58,8.38,6.27C286.11,25.06,284,27.83,280,27.83Z"/><path d="M299.19,28.84h5.89l-1.88-1.95v-9a5.41,5.41,0,0,0-5.52-5.78c-2.14,0-3.55.89-5.22,2.45V12.18l-4,1.27,1.88,1.25V26.89l-1.88,1.95h5.88l-1.88-1.95V15.09c1.14-1.2,2.54-2.41,4.26-2.41,2.72,0,4.35,2.57,4.35,5.05v9.16Z"/></svg>
  </a>
</nav>
{/if}

<style>
  button {
    display: none;
    outline: none;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 2;
    border: none;
    background: transparent;
    padding: 1.33rem 1rem;
  }

  @media (max-width: 900px) {
    button { display: block; }
  }

    button line {
      /* stroke: white; */
      stroke: var(--brown);
    }

    button.open line {
      stroke: var(--brown);
    }

  nav {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    overflow-y: auto;
    padding: 4rem 1rem;
    text-align: center;
    background: var(--beige);
  }

    nav > div {
      border: 1px solid;
      padding: 1.5rem 0;
      margin-bottom: 1rem;
    }

    nav > div:first-of-type {
      padding: 3rem 0;
    }

    h5, h6 {
      color: black;
      margin: 0;
    }

    h5 {
      padding: 1rem;
    }

  a {
    text-decoration: none;
  }

  a.logo {
    display: block;
    padding: 2rem 0;
    color: var(--brown);
  }

  a svg path,
  a svg polygon {
    fill: currentColor;
  }
</style>